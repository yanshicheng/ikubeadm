#!/bin/bash
#File Name    : /etc/profile.d/99-ikubeops-history.sh
#Author       : Yan Shicheng
#Mail         : yans121@sina.com
#Create Time  : 2022-06-21 22:31
#Description  : Bash 历史命令优化

# 增加历史命令数量上限
export HISTSIZE={{ hist_size }}
export HISTFILESIZE={{ hist_size }}

# 添加时间戳和用户信息
export HISTTIMEFORMAT="%Y-%m-%d %H:%M:%S `whoami` "

# 忽略常见的简单命令，避免占用历史空间
export HISTIGNORE="ls:ll:history:w:pwd:exit:clear"

# 实时更新历史记录文件，而不是仅在会话结束时
export PROMPT_COMMAND="history -a; history -n"

# 确保历史记录追加而非覆盖
shopt -s histappend
